<!DOCTYPE html>
<html lang="zh-Hant-TW">

    <head>
        <!-- 基本設定 -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
        <meta name="theme-color" content="#ffffff">
        <meta name="robots" content="index, follow">
        <meta name="author" content="邱敬幃 Pardn Chiu">

        <!-- 網站資訊 -->
        <title>PDPlayerKit | 邱敬幃 Pardn Chiu | GitHub.io</title>
        <meta name="description" content="(JavaScript Library) A pure JavaScript-based PDPlayerKit, supporting YouTube and general video links, with play, pause, volume adjustment, and fullscreen capabilities. Developed by 邱敬幃 Pardn Chiu.">
        <link rel="author" href="https://pardnchiu.github.io">
        <link rel="canonical" href="https://pardnchiu.github.io/PDPlayerKit/">

        <!-- Open Graph / Social Media -->
        <meta property="og:title" content="PDPlayerKit | 邱敬幃 Pardn Chiu | GitHub.io">
        <meta property="og:description" content="A pure JavaScript-based PDPlayerKit, supporting YouTube and general video links, with play, pause, volume adjustment, and fullscreen capabilities.">
        <meta property="og:image" content="https://opengraph.githubassets.com/1/pardnchiu/PDPlayerKit">
        <meta property="og:url" content="https://pardnchiu.github.io/PDPlayerKit/">
        <meta property="og:site_name" content="邱敬幃 Pardn Chiu 的 Github Page">
        <meta property="og:type" content="website">
        <meta name="twitter:card" content="summary_large_image">
        <meta property="twitter:title" content="PDPlayerKit | 邱敬幃 Pardn Chiu | GitHub.io">
        <meta property="twitter:description" content="A pure JavaScript-based PDPlayerKit, supporting YouTube and general video links, with play, pause, volume adjustment, and fullscreen capabilities.">
        <meta property="twitter:image" content="https://opengraph.githubassets.com/1/pardnchiu/PDPlayerKit">
        <meta property="twitter:url" content="https://pardnchiu.github.io/PDPlayerKit/">

        <!-- Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L5VYEZPVXX"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-L5VYEZPVXX');
        </script>

        <!-- Preload and Preconnect -->
        <link rel="preconnect" href="https://cdn.jsdelivr.net">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

        <!-- 外部資源 -->
        <link rel="preload" href="https://cdn.jsdelivr.net/npm/pdquickui@0.5.4/dist/PDQuickUI.js" as="script" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/pdquickui@0.5.4/dist/PDQuickUI.js"></script>
        <link rel="preload" href="https://cdn.jsdelivr.net/npm/code-prettify@0.1.0/loader/run_prettify.min.js" as="script" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/code-prettify@0.1.0/loader/run_prettify.min.js"></script>
        <link rel="preload" href="https://cdn.jsdelivr.net/npm/code-prettify@0.1.0/styles/desert.min.css" as="style" crossorigin="anonymous">
        <link href="https://cdn.jsdelivr.net/npm/code-prettify@0.1.0/styles/desert.min.css" rel="stylesheet">

        <!-- 字體 -->
        <link rel="preload" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" as="style" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">

        <!-- 本地資源 -->
        <link rel="stylesheet" href="./dist/PDPlayerKit.css">
        <link rel="stylesheet" href="./static/css/index.css">
        <script src="./dist/PDPlayerKit.js"></script>
    </head>

    <body id="page">

        <header>
            <section>
                <h1><span class="material-symbols-outlined">subscriptions</span>PDPlayerKit</h1>
                <h2>模組化影片/音訊播放器</h2>
                <p>簡單易用，適合個人網站嵌入。</p>
            </section>
            <section>
                <section>
                    <div id="header-video"></div>
                </section>
                <p>Source: <a href="https://pixabay.com/videos/temple-pond-garden-kinkakuji-temple-214940/" target="_blank">pixabay (Kanenori)</a></p>
            </section>
        </header>

        <section>
            <h2>輕鬆嵌入到個人網站</h2>
            <p>只需從 cdn.jsdelivr.net 引入核心源碼</p>
            <code>https://cdn.jsdelivr.net/npm/pdplayerkit@latest/dist/PDPlayerKit.js</code>
            <p>使用 JavaScript 代碼添加播放器</p>
            <pre class="prettyprint">
                <code class="language-javascript">
const dom = new PDPlayer({
    // 選填：指定元件替換為播放器（元件的 ID）
    // 若未指定，需手動將 dom.body 加入至視圖中
    // id: "元件 ID",

    // 必填：媒體來源設定，以下選項中僅能選擇一項
    video: "[影片位置]",
    // audio: "[音訊位置]",
    // vimeo: "[Vimeo ID]",
    // youtube: "[YouTube ID]"

    // 選填：播放設置
    option: {
        // 控制面板外觀風格，例如 "minimal" 或 "classic"
        panelType: "[風格選擇]",

        // 控制面板按鈕，依需求選擇顯示的功能
        panel: [
            "play", "progress", "time", "timeMini", 
            "volume", "volumeMini", "rate", "full"
        ],
        // 播放器預設音量
        volume: 100,
        // 播放器預設靜音
        mute: false
    },

    // 選填：事件監聽器，可監聽播放過程中的特定事件
    when: {
        ready: function () {
            console.log("播放器準備完成");
        },
        playing: function () {
            console.log("播放中");
        },
        pause: function () {
            console.log("暫停");
        },
        end: function () {
            console.log("播放結束");
        },
        destroyed: function () {
            console.log("已移除");
        }
    }
});

// 若無指定元件，需手動將播放器加入至 DOM 中
(...).appendChild(dom.body);

// 更換內容影片
// dom.replace({
    // 必填：媒體來源設定，以下選項中僅能選擇一項
    // video: "[影片位置]",
    // audio: "[音訊位置]",
    // vimeo: "[Vimeo ID]",
    // youtube: "[YouTube ID]"
    // option: {[播放設置]},
    // when: {[事件監聽]}
// })

// 移除元件
// dom.destory();
                </code>
            </pre>
        </section>

        <section>
            <section>
                <h2>多種不同風格的面板做選擇</h2>
                <p>提供多種預設面板風格，方便快速使用<br>風格與按鈕皆可自訂</p>
                <section id="demo-style" class="button" data-selected="1">
                    <button @click="showDemoStyle" data-index="0">Default</button>
                    <button @click="showDemoStyle" data-index="1">Minimal</button>
                    <button @click="showDemoStyle" data-index="2">Classic</button>
                    <button @click="showDemoStyle" data-index="3">Retro</button>
                    <button @click="showDemoStyle" data-index="4">Simple</button>
                </section>
                <form>
                    <p style="width: 100%">可拖曳變換位置</p>
                    <label draggable="true" @dragstart="dragStart" @dragend="dragEnd" @dragover="dragOver" @dragleave="dragLeave" @drop="drop" @change="change">
                        <input type="checkbox" name="buttonItem" value="play" checked>play
                    </label>
                    <label draggable="true" @dragstart="dragStart" @dragend="dragEnd" @dragover="dragOver" @dragleave="dragLeave" @drop="drop" @change="change">
                        <input type="checkbox" name="buttonItem" value="progress" checked>progress
                    </label>
                    <label draggable="true" @dragstart="dragStart" @dragend="dragEnd" @dragover="dragOver" @dragleave="dragLeave" @drop="drop" @change="change">
                        <input type="checkbox" name="buttonItem" value="time" checked>time
                    </label>
                    <label draggable="true" @dragstart="dragStart" @dragend="dragEnd" @dragover="dragOver" @dragleave="dragLeave" @drop="drop" @change="change">
                        <input type="checkbox" name="buttonItem" value="timeMini">timeMini
                    </label>
                    <label draggable="true" @dragstart="dragStart" @dragend="dragEnd" @dragover="dragOver" @dragleave="dragLeave" @drop="drop" @change="change">
                        <input type="checkbox" name="buttonItem" value="volume">volume
                    </label>
                    <label draggable="true" @dragstart="dragStart" @dragend="dragEnd" @dragover="dragOver" @dragleave="dragLeave" @drop="drop" @change="change">
                        <input type="checkbox" name="buttonItem" value="volumeMini" checked>volumeMini
                    </label>
                    <label draggable="true" @dragstart="dragStart" @dragend="dragEnd" @dragover="dragOver" @dragleave="dragLeave" @drop="drop" @change="change">
                        <input type="checkbox" name="buttonItem" value="rate" checked>rate
                    </label>
                    <label draggable="true" @dragstart="dragStart" @dragend="dragEnd" @dragover="dragOver" @dragleave="dragLeave" @drop="drop" @change="change">
                        <input type="checkbox" name="buttonItem" value="full" checked>full
                    </label>
                    <hr>
                    <button type="button" @click="copyDemoStyle">
                        <span class="material-symbols-outlined">
                            content_copy
                        </span>
                        複製代碼
                    </button>
                </form>
            </section>
            <section>
                <section id="sample-video"></section>
                <p id="sample-video-hint"></p>
            </section>
        </section>

        <section>
            <section>
                <section id="sample-youtube"></section>
                <p id="sample-youtube-hint"></p>
            </section>
            <section>
                <h2>支持 Vimeo / YouTube</h2>
                <p>直接提供影片 ID 即可播放</p>
                <section class="button" data-selected="0">
                    <button @click="showDemoVimeo">Viemo</button>
                    <button @click="showDemoYoutube">Youtube</button>
                </section>
            </section>
        </section>

        <section>
            <section>
                <h2>音源播放支援</h2>
                <p>適合嵌入背景音樂或播客</p>
                <section id="demo-audio" class="button" data-selected="0">
                    <button @click="showDemoAudio" data-index="0">Demo 1</button>
                    <button @click="showDemoAudio" data-index="1">Demo 2</button>
                    <button @click="showDemoAudio" data-index="2">Demo 3</button>
                </section>
            </section>
            <section>
                <section id="sample-audio"></section>
                <p id="sample-audio-hint"></p>
            </section>
        </section>

        <footer>
            <p>Created by <a href="https://github.com/pardnchiu" target="_blank">邱敬幃</a></p>
            <p><a href="https://github.com/pardnchiu/PDPlayerKit" target="_blank">PDPlayerKit on GitHub</a></p>
            <p>&copy; 2024</p>
        </footer>

        <script type="module">
            // import { player as PDPlayer } from "./dist/PDPlayerKit.module.js";

            let dragTarget, demoVideoCode, copyTimer, demoStylePlayer, demoVimeoPlayer, demoYoutubePlayer;
            const demoStyle = [
                ["", "https://cdn.pixabay.com/video/2023/11/28/191159-889246512_tiny.mp4", "https://pixabay.com/videos/gull-bird-snow-plumage-sitting-191159/", "NickyPe"],
                ["minimal", "https://cdn.pixabay.com/video/2024/06/06/215484_tiny.mp4", "https://pixabay.com/videos/sea-waves-reflection-undulations-215484/", "xBriantcx"],
                ["classic", "https://cdn.pixabay.com/video/2023/10/22/186115-877653483_tiny.mp4", "https://pixabay.com/videos/beach-sea-ocean-sand-drone-aerial-186115/", "Anewlifetraveling"],
                ["retro", "https://cdn.pixabay.com/video/2019/01/06/20495-310204614_tiny.mp4", "https://pixabay.com/videos/pixel-bit-coin-game-video-vector-20495/", "Gam-Ol"],
                ["simple", "https://cdn.pixabay.com/video/2020/09/16/50109-459915579_tiny.mp4", "https://pixabay.com/videos/tennis-match-sport-ball-game-50109/", "xat-ch"]
            ];
            const demoAudio = [
                ["retro", "https://cdn.pixabay.com/download/audio/2024/09/16/audio_a10608d6cd.mp3?filename=creative-technology-showreel-241274.mp3", "https://pixabay.com/music/beats-creative-technology-showreel-241274/", "Pumpupthemind"],
                ["classic", "https://cdn.pixabay.com/download/audio/2024/10/21/audio_78251ef8e3.mp3?filename=beautiful-loop-253269.mp3", "https://pixabay.com/music/beautiful-loop-253269/", "DaveJf"],
                ["simple", "https://cdn.pixabay.com/download/audio/2024/04/12/audio_3118cb3f2a.mp3?filename=groovy-ambient-funk-201745.mp3", "https://pixabay.com/music/groovy-ambient-funk-201745/", "moodmode"],
            ];

            document.addEventListener("DOMContentLoaded", _ => {

                function getButtonItems() {
                    return [...document.querySelectorAll("input[name='buttonItem']:checked")].map(e => e.value);
                };

                function demoStyleCode(data) {
                    return `\<script src="https://cdn.jsdelivr.net/npm/pdplayerkit@latest/dist/PDPlayerKit.js"\>\</script\>
\<script\>
const dom = new PDPlayer({
    video: "${data[1]}",
    option: {
        panelType: "${data[0]}",
        panelItem: ${JSON.stringify(getButtonItems())},
        volume: 100,
        mute: false
    }
});
\</script\>`;
                }

                const page = new QUI({
                    id: "page",
                    event: {
                        change: e => {
                            const index = +document.getElementById("demo-style").dataset.selected;
                            const data = demoStyle[index];
                            const dom = new PDPlayer({
                                type: data[0],
                                video: data[1],
                                volume: 100,
                                mute: false,
                                panel: getButtonItems()
                            });

                            document.getElementById("sample-video").innerHTML = ""
                            document.getElementById("sample-video").appendChild(dom.body);
                        },
                        dragStart: e => {
                            dragTarget = e.target;
                            setTimeout(() => {
                                dragTarget.style.opacity = "0.5";
                            }, 0);
                        },
                        dragEnd: e => {
                            setTimeout(() => {
                                dragTarget.style.opacity = "1";
                                dragTarget = null;
                            }, 0);
                        },
                        dragOver: e => {
                            e.preventDefault();

                            if (e.target === dragTarget) {
                                return;
                            }

                            e.target.style.color = "red";
                        },
                        dragLeave: e => {
                            e.target.style.color = "#000";
                        },
                        drop: e => {
                            e.preventDefault();

                            if (dragTarget !== e.target) {
                                // 將被拖曳的項目插入到放置項目之前
                                let allItems = [...dragTarget.parentElement.children];
                                let droppedIndex = allItems.indexOf(e.target);
                                let draggedIndex = allItems.indexOf(dragTarget);

                                e.target.style.color = "#000";

                                if (draggedIndex > droppedIndex) {
                                    console.log(dragTarget, e.target)
                                    dragTarget.parentElement.insertBefore(dragTarget, e.target);
                                }
                                else {
                                    dragTarget.parentElement.insertBefore(dragTarget, e.target.nextElementSibling);
                                };

                                page.event.change();
                            }
                        },
                        showDemoStyle: e => {
                            const _this = e.target;
                            const index = +_this.dataset.index;
                            const data = demoStyle[index];

                            if (demoStylePlayer != null) {
                                demoStylePlayer.destroy();
                            };

                            demoStylePlayer = new PDPlayer({
                                video: data[1],
                                option: {
                                    panelType: data[0],
                                    panelItem: getButtonItems(),
                                }
                            });
                            document.getElementById("sample-video").innerHTML = ""
                            document.getElementById("sample-video").appendChild(demoStylePlayer.body);
                            document.getElementById("sample-video-hint").innerHTML = `Source: <a href="${data[2]}" target="_blank">pixabay (${data[3]})</a>`;

                            _this.parentElement.dataset.selected = index;
                        },
                        copyDemoStyle: e => {
                            const _this = e.target;
                            const index = +document.getElementById("demo-style").dataset.selected;
                            const data = demoStyle[index];

                            clearTimeout(copyTimer);
                            
                            try {
                                navigator.clipboard.writeText(demoStyleCode(data));

                                _this.innerHTML = _this.innerHTML.replace(/複製代碼/, "已複製");
                                copyTimer = setTimeout(() => {
                                    _this.innerHTML = _this.innerHTML.replace(/已複製/, "複製代碼");
                                }, 500);
                            }
                            catch (err) {
                                alert(err);
                            };
                        },
                        showDemoAudio: e => {
                            const _this = e.target;
                            const index = +_this.dataset.index;
                            const data = demoAudio[index];
                            const dom = new PDPlayer({
                                audio: data[1],
                                option: {
                                    panelType: data[0],
                                }
                            });
                            document.getElementById("sample-audio").innerHTML = ""
                            document.getElementById("sample-audio").appendChild(dom.body);
                            document.getElementById("sample-audio-hint").innerHTML = `Source: <a href="${data[2]}" target="_blank">pixabay (${data[3]})</a>`;

                            _this.parentElement.dataset.selected = index;
                        },
                        showDemoYoutube: e => {
                            // if (demoYoutubePlayer != null) {
                            //     return;
                            // };
                            // if (demoVimeoPlayer != null) {
                            //     demoVimeoPlayer.destroy()
                            //     demoVimeoPlayer = null;
                            // };

                            demoYoutubePlayer = new PDPlayer({
                                youtube: "O5O3yK8DJCc",
                                option: {
                                    panelType: "minimal",
                                }
                            });
                            document.getElementById("sample-youtube").innerHTML = "";
                            document.getElementById("sample-youtube").appendChild(demoYoutubePlayer.body);
                            document.getElementById("sample-youtube-hint").innerHTML = `Source: <a href="https://www.youtube.com/watch?v=O5O3yK8DJCc" target="_blank">youtube (Sony)</a>`;

                            if (e != null) {
                                e.target.parentElement.dataset.selected = 1;
                            };
                        },
                        showDemoVimeo: e => {
                            // if (demoVimeoPlayer != null) {
                            //     return;
                            // };
                            // if (demoYoutubePlayer != null) {
                            //     demoYoutubePlayer.destroy();
                            //     demoYoutubePlayer = null;
                            // };

                            demoVimeoPlayer = new PDPlayer({
                                vimeo: "458695734",
                                option: {
                                    panelType: "minimal",
                                }
                            });
                            document.getElementById("sample-youtube").innerHTML = "";
                            document.getElementById("sample-youtube").appendChild(demoVimeoPlayer.body);
                            document.getElementById("sample-youtube-hint").innerHTML = `Source: <a href="https://vimeo.com/458695734" target="_blank">vimeo (UAS Flight Ops)</a>`;

                            if (e != null) {
                                e.target.parentElement.dataset.selected = 0;
                            };
                        }
                    },
                    when: {
                        rendered: _ => {
                            const dom = new PDPlayer({
                                id: "header-video",
                                video: "https://cdn.pixabay.com/video/2024/06/02/214940_tiny.mp4"
                            });

                            document.getElementById("demo-style").children[1].click()
                            document.getElementById("demo-audio").children[0].click()

                            setTimeout(() => {
                                page.event.showDemoVimeo();
                            }, 1000);
                        }
                    }
                });
            });
        </script>
    </body>

</html>